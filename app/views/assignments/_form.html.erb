<div style="float: right; text-align: right;">
  <p>
<%= f.label :volunteer_shift %>    <table class="awesome">

      <tr><td>Id:</td><td><%= f.object.volunteer_shift_id %></td></tr>
      <tr><td>Date:</td><td><%= f.object.volunteer_shift.date %></td></tr>
      <tr><td>Time range:</td><td><%= f.object.volunteer_shift.time_range_s %></td></tr>
      <tr><td>Shift description:</td><td><%= vs = f.object.volunteer_shift; s = vs.volunteer_task_type_id.nil? ? vs.volunteer_event.description : vs.volunteer_task_type.description; s += ", #{vs.description}" if vs.description.to_s.length > 0; s %></td></tr>
      <tr><td>Available time range:</td><td><%= [f.object.volunteer_shift.assignments.select{|x| x.contact_id.nil?}, f.object].flatten.sort_by(&:start_time).uniq.map{|x| x.time_range_s}.join(", ") %></td></tr>
      <tr><td>Volunteer event notes:</td><td><%= (f.object.volunteer_shift.volunteer_event.notes || "").gsub('\n', '<br/>') %></td></tr>
    </table>
  </p>

    <%= f.label :contact_id %><br />
    <% @obj = f.object %>
      <%= contact_field("@obj", "assignment",
                    :locals => {:options => {
                        :object_name => "assignment",
                        :field_name => 'contact_id'
                      }}) %>
  </div>
  <p>
    <%= f.label :start_time %><br />
    <%= f.time_select :start_time, :ignore_date => true, :twelve_hour => true, :include_blank => false %>
  </p>
  <p>
    <%= f.label :end_time %><br />
    <%= f.time_select :end_time, :ignore_date => true, :twelve_hour => true, :include_blank => false %>
  </p>
  <% if f.object.contact_id %>
  <p>
    <%= f.label :attendance_type_id %><br />
    <%= select(f.object_name, "attendance_type_id", AttendanceType.find(:all).sort_by(&:id).collect {|p| [ p.name, p.id ] }, :include_blank => true) %>
  </p>
  <% end %>

  <p>
    Notes only get saved if a contact is assigned the shift, and get removed when the contact is removed from the shift.<br />
    <%= f.label :notes %><br />
    <%= f.text_area :notes %>
  </p>
