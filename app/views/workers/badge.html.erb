<% form_tag(:action => "badge") do %>
<div>
Find a contact to add to badge printout:
<%= contact_field '@contacts', "contact_id" %>
<%= hidden_field_tag "contacts", params[:contacts] %>
</div>

<br />
<div style="clear: left">
<%= submit_tag "Add Contact" %>
</div>

<% end %>

<% if @contacts %>
<H2>Will generate badges for the following contacts:</H2>
<% @contacts.each do |x| %>
#<%= x.id %>: <%= x.first_name %> <%= x.surname %>,
<% if !@workers.include?(x) %><%= x.intern_title %>

<% form_remote_tag :url => {:action => "modify_intern_title", :id => x.id}, :loading => "$(#{loading_indicator_id("intern_contact_#{x.id}").to_json}).show();" do %>
<%= text_field_tag "title", x.volunteer_intern_title.to_s %>
<%= loading_indicator_tag "intern_contact_#{x.id}" %>
<%= submit_tag "Update title!" %>
<% end %>

<% else %>Staff<% end %>(<%= link_to "Remove", params.merge(:contact => nil, :contacts => @contacts.map(&:id).select{|y| y != x.id}.join(",")) %>)
<br />
<% end %>
<br />
<% @workers.each do |x| %>
<%= link_to "Upload staff image for #{x.worker.name}", {:action => "upload", :id => x.worker.id}, :target => "_blank" %> <br />
<% end %>
<br />
<%= button_to "Generate PDF", params.merge({:action => "generate_badges"}) %>
<br />


<% end %>
