<div class='filter'>

<%
    @opts = skedj.opts
    @conditions = skedj.conditions
%>

<h3>Filter work shifts:</h3>
<% form_tag({:action => params[:action]}, {:method => "get"}) do %>
  <%= conditions_html('conditions', skedj.opts[:conditions], Conditions, "multi") %>


<% if skedj.opts[:date_range_condition] %>
  <%= conditions_html('conditions', ["empty", skedj.opts[:date_range_condition]], Conditions, "force").gsub(/To:/, "<br />To:") %>
<% else %>
  <%= conditions_html('conditions', ["empty"])%>
<% end %>


<% if skedj.opts[:date_range_condition] %>
  <script>
    c = $('conditions_<%=  skedj.opts[:date_range_condition]%>_date_type');
    c.parentNode.removeChild(c);
  </script>
<% end %>

  <br / >


<% if skedj.opts[:views] %>
  <br / >
  <% for k in skedj.opts[:views].keys.sort_by{|x| x.to_s == @opts[:default_view].to_s ? 0 : 1} %>
  <%= radio_button :opts, :current_view, k, :checked => (@opts['current_view']==k) %> <%= k.to_s.humanize %>
  <% end %>
<% end %>

  <br / >
  <%= radio_button :opts, :presentation_mode, 'Edit', :checked => (@opts['presentation_mode']=='Edit') %> Edit
  <%= radio_button :opts, :presentation_mode, 'Display', :checked => (@opts['presentation_mode']=='Display') %> Display
  <%= radio_button :opts, :presentation_mode, 'Preview', :checked => (@opts['presentation_mode']=='Preview') %> Preview<br />
  <%= submit_tag "Go" %><br />
<% end %>
</div>
