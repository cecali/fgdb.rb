<% if skedj.opts.include?(:table_head_partial) %>
<%= render :partial => skedj.opts[:table_head_partial], :locals => {:skedj => skedj, :block_display => skedj.get_method_value(skedj.current, :block_method_display), :block_anchor => skedj.get_method_value(skedj.current,( skedj.opts.include?(:block_anchor) ? :block_anchor : :block_method_display))} %>
<% end %>
<a name="<%= skedj.get_method_value(skedj.current,( skedj.opts.include?(:block_anchor) ? :block_anchor : :block_method_display)) %>" />
<table class="skedj" border="0" width="100%" summary="<%=h skedj.get_method_value(skedj.current,:block_method_display) %>">
<% day_length = (( skedj.get_method_value(skedj.current, :block_end_time) - skedj.get_method_value(skedj.current, :block_start_time) ) / ( 60 * 30 )).to_int %>

    <caption><%=h skedj.get_method_value(skedj.current, :block_method_display) %> (<%= params[:controller].humanize.downcase %>)</caption>
    <tr>
    <th width="10%">&nbsp;</th>
    <% for i in (0..(@day_length-1)) %>
      <% time = (@sched_start_time + (i * 60 * 30 )) %>
      <% display_time = time.strftime(" %I:%M").gsub( ' 0', '' ) %>
      <th colspan="30" width="<%= @width %>%"><%= display_time %></th>
    <% end %>
    </tr>

