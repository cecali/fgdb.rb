<h1>Report of schedule problems between <%= @start_date.to_s %> and <%= @end_date.to_s %></h1>

<h2>Worker Conflicts</h2>
<% if @conflicts.length == 0 %>
none found
<% else %>
<ul>
  <% @conflicts.each do |x| %>
    <li><%= x %></li>
  <% end %>
</ul>
<% end %>
<h2>Unassigned Shifts</h2>
<% if @unassigned.length == 0 %>
none found
<% else %>
<ul>
  <% @unassigned.each do |x| %>
    <li><%= x %></li>
  <% end %>
</ul>
<% end %>
<h2>Gaps in Fully Covered Jobs</h2>

<table class="awesome">
  <tr>
    <th>Fully Covered Jobs</th>
    <% (@all_dates).each do |x| %>
    <th><%= x.strftime("%a, %D") %></th>
    <% end %>
  </tr>
  <% @jobs.sort_by(&:name).each do |j| %>
  <tr>
    <th><%= j.name %></th>
    <% (@all_dates).each do |x| %>
    <td>
      <% @shift_gap_hash[j.id][x].each do |g| %>
      <b>GAP</b>: <%= g[0].strftime("%T") %> - <%= g[1].strftime("%T") %><br />
      <% end %>
    </td>
    <% end %>
  </tr>
  <% end %>
</table>
<h2>Weekly Hours Scheduled By Worker</h2>

<table class="awesome">
  <tr>
    <th>Fully Covered Jobs</th>
    <% (@weeks).each do |x| %>
    <th><%= x.strftime("%D") %> - <%= (x + 6).strftime("%D") %></th>
    <% end %>
  </tr>
  <% @workers.sort_by(&:name).each do |worker| %>
  <tr>
    <th><%= worker.name %></th>
    <% (@weeks).each do |w| %>
    <td>
      <%= @workers_week_hash[worker.id][w] %>
    </td>
    <% end %>
  </tr>
  <% end %>
</table>
