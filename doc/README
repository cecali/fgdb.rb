=========================
_F_ree_G_eek _D_ata_B_ase
=========================

this webapp is meant to keep track of two main areas:
 * volunteers and the time they work
 * gizmos and their flow through our organization

the /volunteer_tasks controller tracks volunteers and their hours.
the /transaction controller takes care of gizmo flow.
the /reports controller has some useful numbers.

in the near future i hope to add:
 * classes and who has completed them
 * projects (such as building and testing a computer) and who has
   worked on them

a bunch of other controllers are scattered around to support these,
but should not be used by typical users.

-------
Install
-------

i did this on a debian etch box; alteration may be needed on other
distros.

To get the fgdb.rb source, which you probably have, because you're reading this:

 $> svn co http://svn.freegeek.org/svn/fgdb.rb/trunk fgdb.rb

to install a working Ruby on Rails environment:

 $> apt-get install ruby rubygems postgresql-8.1 build-essential \
        apache2 ruby1.8-dev libpgsql-ruby irb
 $> gem install -y -v 1.1.2 rails
 $> gem install ferret # needs build-essential

on Ubuntu Dapper you will need to get gems from the internet.

and now you need to create the database:

 $> su - postgres -c 'createuser -P SOMEUSER'
      # capable of creating databases, but nothing else
 $> createdb -h localhost -U SOMEUSER fgdb.rb_production
 $> createdb -h localhost -U SOMEUSER fgdb.rb_test
 $> createdb -h localhost -U SOMEUSER fgdb.rb_development
 $> cd fgdb.rb
   ::: edit config/database.yml-example to fit and rename it (drop -example) :::
 $> export RAILS_ENV=production
 $> alias rake='/var/lib/gems/1.8/bin/rake'
      # yeah, etch rubygems are broken
 $> rake db:schema:load
 $> rake db:metadata:load

run some tests to see if things look okay

 $> rake
 $> rake db:test:purge
 $> rake test:units

if you see lots of failures or errors,
something is wrong.
then start the server and browse in to see things working

 $> ./script/server &
 $> iceweasel http://localhost:3000

feel free to read the notes and listen to an audio log from our
install at the vancouver freegeek site:
http://puddle.ca/~joe/freegeek/martin_install.ogg
http://puddle.ca/~joe/freegeek/fg_database_install-HOWTO

for a production server running apache and fcgid,
continue with the following:

 $> apt-get install libapache2-mod-fcgid libfcgi-ruby1.8
 $> a2enmod rewrite
 $> cp doc/examples/apache2_sites-available_default /etc/apache2/sites-available/default
   ::: modify apache config to taste :::
   ::: edit config/environment.rb to say "ENV['RAILS_ENV'] ||= 'production'" :::

----
TODO
----

see our trac (http://svn.freegeek.org/projects/fgdb.rb/) for details,
but some important tasks left unfinished:

 * authentication
 * non-ajax interface
 * deb package
 * howto on working with apache
 * moving to the latest rails release
